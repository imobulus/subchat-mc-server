name: subchat-mc-server

volumes:
  mcworld:

services:
  mc-server:
    build:
      context: .
      dockerfile: mc-server.Dockerfile
    ports:
      - 100.126.72.77:8080:8080
    stdin_open: true
    tty: true
    volumes:
      - type: bind
        source: minecraft-server/config
        target: /mcserver/external-server-config
        volume:
          nocopy: true
        read_only: true
      - type: volume
        source: mcworld
        target: /mcserver/world
        volume:
          nocopy: true
  mc-proxy:
    build:
      context: .
      dockerfile: mc-proxy.Dockerfile
    ports:
      - 100.126.72.77:25565:25565
    volumes:
      - type: bind
        source: mc-proxies
        target: /infrared/proxies
        read_only: true
